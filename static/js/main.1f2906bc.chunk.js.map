{"version":3,"sources":["components/constants.tsx","assets/images/Ultra.svg","components/Ultra.tsx","actions/talentActions.tsx","models/Talent.tsx","actions/timerActions.tsx","actions/types.tsx","models/NullTalentIncubator.tsx","utils/time.tsx","assets/images/PlayButton.svg","assets/images/StopButton.svg","components/PlayToggleButton.tsx","components/TalentControls.tsx","assets/images/EditIcon.svg","assets/images/DeleteIcon.svg","components/TalentRightClickMenu.tsx","components/TalentListItem.tsx","components/TalentList.tsx","components/TalentTimer.tsx","assets/images/Logo.svg","components/Header.tsx","assets/images/AddTalentButton.svg","components/NewTalentButton.tsx","components/UltraConsole.tsx","App.tsx","serviceWorker.tsx","reducers/talentReducer.tsx","reducers/timerReducer.tsx","reducers/index.tsx","store.tsx","models/SimpleModel.tsx","models/LocalTalentModel.tsx","models/TalentSession.tsx","models/LocalTalentSessionModel.tsx","models/TalentIncubator.tsx","modelSetup.tsx","index.tsx"],"names":["bodyFont","fontFamily","medBlue","color","centerCell","display","justifyContent","alignItems","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","createElement","id","d","_ref","svgRef","title","props","width","height","viewBox","ref","ForwardRef","forwardRef","FlashingUltra","styled","UltraImage","Ultra","talentModel","progressNorm","Math","min","progress","progressTarget","floor","backgroundOpacity","topFill","closeTarget","flashbarScale","beingTimed","style","opacity","fill","background","gridColumn","gridRow","position","transform","transformOrigin","transitionTimingFunction","transitionDuration","createTalent","name","userId","goldUltras","totalSeconds","streakCount","streakObtained","expiring","burndown","cloneTalent","talent","sessionModel","assertModelActive","undefined","EvalError","updateTalent","dispatch","type","payload","update","calculateTalentProgression","getState","talents","timer","talentsData","items","sessionsData","sessions","currentDate","Date","filter","s","talentId","reset","setHours","getTime","setDate","getDate","todaysHits","startTimestamp","endTimestamp","hits","latestHit","reduce","cur","next","arr","pastExpiryDate","expirationDateMs","hitEndMs","isBurningDown","nDays","lossModifier","lostProgress","finalProgress","max","NullTalentIncubator","session","Null","incubator","stopSession","bredTalent","getTalent","get","pollSession","stop","document","poll","timeString","ts","seconds","round","minutes","hours","prettyTimeString","progressObtained","getSessions","getAll","PlayToggleButton","useDispatch","startSessionAction","useCallback","isIncubating","exchange","incubate","stopSessionAction","e","ghost","placeholder","test-id","onClick","cursor","TalentControls","textColor","sm","ss","sh","sessionTimeString","ceil","marginRight","fontSize","margin","mixBlendMode","role","aria-label","textAlign","marginTop","marginBottom","MenuItem","useState","hovering","setHovering","mouseEnter","mouseLeave","Row","className","backgroundColor","borderRadius","maxWidth","onMouseEnter","onMouseLeave","onMouseUp","click","Col","icon","text","TalentRightClickMenu","deleteAction","deleteId","top","y","left","x","boxShadow","zIndex","EditIcon","edit","DeleteIcon","TalentListItem","blockCancel","useRef","beginEditing","editing","setEditing","enableEditing","current","setTimeout","useEffect","handleDisableEditingOnDefocus","addEventListener","removeEventListener","rightClick","setRightClick","rightClickCoords","setRightClickCoords","openRightClickMenu","preventDefault","pageX","pageY","handleCloseOnDefocus","progressDisplayValue","overflow","closeTargetDisplayValue","setName","onEditNameChange","value","onEditNameFinished","minHeight","onContextMenu","minWidth","onSubmit","border","padding","onChange","TalentList","map","lastBeginsEditing","TalentProgress","dummyTalent","TalentPlaceholder","borderStyle","borderColor","borderWidth","TalentTimer","timing","setTimer","setInterval","clearInterval","_ref3","_ref4","Header","maxHeight","NewTalentButton","opening","setOpening","newTalentAction","window","scrollTo","outerHeight","create","conditionalAnimation","showHint","setShowHint","UltraConsole","con","JSON","parse","localStorage","getItem","dayJump","parseInt","timeModifier","today","stringify","tomorrow","advanceTo","setItem","setMilliseconds","getMilliseconds","previousLogs","entry","setEntry","log","setLog","typeCommandEntry","fireCommandEntry","niceDate","date","toString","split","month","day","year","time","scribe","newLog","strVal","startsWith","isNaN","location","reload","mod","dLog","getElementById","scrollHeight","borderBottom","overflowY","el","borderTop","App","eco","ReactGA","initialize","pageview","tm","ev","event","category","action","bVal","state","useSelector","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","onUpdate","onSuccess","catch","error","model","newIncubator","initialState","combineReducers","sort","a","b","newTalent","newItems","tal","findIndex","targetId","exclusionItems","includeItem","middleware","thunk","createUltraStore","createStore","rootReducer","applyMiddleware","SimpleModel","kvPairs","cloneFunc","getIdFunc","setIdFunc","counter","models","ReferenceError","pair","Map","Array","from","nId","TypeError","has","RangeError","clone","set","save","values","element","delete","LocalTalentModel","talentPairs","initialTalents","rawTalents","cloneSession","ultrasHeld","LocalTalentSessionModel","initialTalentSessions","seed","createSession","TalentIncubator","initialTalent","lastUpdateMs","now","nowMs","sDelta","nOverflow","configureSessionModel","ReactDOM","render","store","URL","process","href","origin","fetch","response","contentType","headers","status","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.1f2906bc.chunk.js","sourcesContent":["export const cGhostBlue = \"#D7D6FF\";\r\nexport const cMedBlue = \"#8E8AFF\";\r\nexport const cUltraBlue = \"#453EFF\";\r\nexport const cGold = \"#FFC916\";\r\n\r\nexport const bodyFont: React.CSSProperties = {\r\n    fontFamily: \"Signika\"\r\n}\r\n\r\nexport const medBlue: React.CSSProperties = {\r\n    color: cMedBlue\r\n}\r\n\r\nexport const centerCell: React.CSSProperties = {\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\"\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Polygon_43\",\n  \"data-name\": \"Polygon 43\",\n  d: \"M63,0l63,111H0Z\"\n});\n\nvar SvgUltra = function SvgUltra(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 130,\n    height: 111,\n    viewBox: \"0 0 130 111\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgUltra, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Ultra.14482710.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\n\r\nimport styled from 'styled-components';\r\n\r\nimport { ReactComponent as UltraImage } from '../assets/images/Ultra.svg';\r\nimport { cGhostBlue, cUltraBlue, cGold } from './constants';\r\n\r\nconst FlashingUltra = styled(UltraImage)`\r\n@-webkit-keyframes flash {\r\n\t0% { opacity: 1; } \r\n    20% { opacity: 0; }\r\n    80% { opacity: 0; }\r\n\t100% { opacity: 1; }\r\n}\r\n@keyframes flash {\r\n\t0% { opacity: 1; } \r\n    20% { opacity: 0; }\r\n    80% { opacity: 0; }\r\n\t100% { opacity: 1; }\r\n}\r\n\r\n-webkit-animation: flash linear 1s infinite;\r\nanimation: flash linear 1s infinite;\r\n`;\r\n\r\ntype UltraProps = {\r\n    progress: number,\r\n    progressTarget: number,\r\n    closeTarget?: number,\r\n    background?: string,\r\n    backgroundOpacity?: string,\r\n    beingTimed?: boolean\r\n}\r\n\r\nfunction Ultra(props: UltraProps) {\r\n    // Limit progress as emulated progress results in values greater than 1\r\n    let progress = Math.min(props.progress, props.progressTarget)\r\n    let progressNorm = progress / props.progressTarget;\r\n    progressNorm = Math.floor(progressNorm * 100) / 100;\r\n\r\n    let backgroundOpacity = props.backgroundOpacity ?? \"1\";\r\n    let topFill = progressNorm === 1 ? cGold : cUltraBlue;\r\n    let closeTarget = Math.min(props.closeTarget ?? 0, 1);\r\n\r\n    let flashbarScale = Math.min(props.beingTimed ? progressNorm + 0.05 : 0, 1);\r\n    return (\r\n        <>\r\n        <div style={{\r\n            display: \"grid\"\r\n        }}>\r\n            <UltraImage opacity={backgroundOpacity}\r\n                fill={props.background ?? cGhostBlue}\r\n                style={{\r\n                    gridColumn: 1,\r\n                    gridRow: 1\r\n                }} />\r\n            <UltraImage opacity={0.5} fill={topFill}\r\n                style={{\r\n                    position: \"relative\",\r\n                    transform: `scale(${closeTarget})`,\r\n                    transformOrigin: \"bottom left\",\r\n                    transitionTimingFunction: \"ease-out\",\r\n                    transitionDuration: \"300ms\",\r\n                    gridColumn: 1,\r\n                    gridRow: 1,\r\n                }} />\r\n            <FlashingUltra fill={cGold}\r\n                style={{\r\n                    position: \"relative\",\r\n                    transform: `scale(${flashbarScale})`,\r\n                    transformOrigin: \"bottom left\",\r\n                    transitionTimingFunction: \"ease-out\",\r\n                    transitionDuration: \"300ms\",\r\n                    gridColumn: 1,\r\n                    gridRow: 1\r\n                }} />\r\n            <UltraImage fill={topFill}\r\n                style={{\r\n                    position: \"relative\",\r\n                    transform: `scale(${progressNorm})`,\r\n                    transformOrigin: \"bottom left\",\r\n                    transitionTimingFunction: \"ease-out\",\r\n                    transitionDuration: \"300ms\",\r\n                    gridColumn: 1,\r\n                    gridRow: 1,\r\n                }} />\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Ultra;","import { Talent, createTalent } from '../models/Talent';\r\nimport IModel from '../models/IModel';\r\nimport { NEW_TALENT, DELETE_TALENT, GET_TALENTS, UPDATE_TALENT, EXCLUDE_TALENT, INCLUDE_TALENT, CALCULATE_PROGRESSION } from './types';\r\nimport { RootState } from '../store';\r\nimport { TalentSession } from '../models/TalentSession';\r\n\r\nlet talentModel: IModel<Talent>;\r\n\r\n/**\r\n * Changes how actions will interact with talent data, and how talent data\r\n * will be stored.\r\n * @param model A model object that manages talent data.\r\n */\r\nexport const configureModel = (model: IModel<Talent>) => {\r\n    talentModel = model;\r\n}\r\n\r\nconst assertModelActive = () => {\r\n    if (talentModel === null || talentModel === undefined)\r\n        throw new EvalError(\"Could not evaluate dispatch action. configureModel() has not been called on this action script.\");\r\n}\r\n\r\nexport const getTalents = () => (dispatch: any) => {\r\n    assertModelActive();\r\n    let talents = talentModel.getAll();\r\n    dispatch({\r\n        type: GET_TALENTS,\r\n        payload: talents\r\n    })\r\n}\r\n\r\nexport const newTalent = (name: string) => (dispatch: any) => {\r\n    assertModelActive();\r\n    let newTalent = talentModel.create(createTalent(0, name));\r\n    dispatch({\r\n        type: NEW_TALENT,\r\n        payload: newTalent\r\n    });\r\n}\r\n\r\nexport const deleteTalent = (id: number) => (dispatch: any) => {\r\n    assertModelActive();\r\n    talentModel.deleteId(id);\r\n    dispatch({\r\n        type: DELETE_TALENT,\r\n        payload: id\r\n    });\r\n}\r\n\r\nexport const updateTalent = (talent: Talent) => (dispatch: any) => {\r\n    assertModelActive();\r\n    let modelTalent = talentModel.update(talent);\r\n    dispatch({\r\n        type: UPDATE_TALENT,\r\n        payload: modelTalent\r\n    });\r\n}\r\n\r\nexport const excludeTalent = (id: number) => (dispatch: any) => {\r\n    dispatch({\r\n        type: EXCLUDE_TALENT,\r\n        payload: id\r\n    });\r\n}\r\n\r\nexport const includeTalent = (id: number) => (dispatch: any) => {\r\n    assertModelActive();\r\n    let modelTalent = talentModel.get(id);\r\n    dispatch({\r\n        type: INCLUDE_TALENT,\r\n        payload: modelTalent\r\n    });\r\n}\r\n\r\nexport const calculateTalentProgression = () => (dispatch: any, getState: () => RootState) => {\r\n    const { talents, timer } = getState();\r\n    let talentsData = talents.items;\r\n    let sessionsData = timer.sessions;\r\n    \r\n    if (sessionsData.length === 0)\r\n        return\r\n\r\n    if (talentsData.length === 0)\r\n        return\r\n\r\n    let currentDate = new Date();\r\n    for (let talent of talentsData) {\r\n        let sessions = sessionsData.filter(s => s.talentId === talent.id);\r\n\r\n        // Move on and don't modify talent data, talent has never been timed\r\n        if (sessions.length === 0)\r\n            continue;\r\n\r\n        let reset = new Date(currentDate);\r\n        reset.setHours(4, 0, 0, 0);\r\n        \r\n        // Move back a waking day if we're between the 0 AM - 4 AM time range\r\n        if (currentDate.getTime() <= reset.getTime()) {\r\n            reset.setDate(reset.getDate() - 1);\r\n        }\r\n\r\n        // Calculate whether a streak hit is available\r\n\r\n        let todaysSessions = sessions.filter(s => s.startTimestamp.getTime() >= reset.getTime());\r\n\r\n        let todaysHits = todaysSessions.filter(s => {\r\n            if (!s.endTimestamp)\r\n                throw new EvalError(\"Couldn't calculate talent progression. Two sessions haven't been marked as ended. Data is possibly corrupted.\");\r\n                // return false;\r\n\r\n            return s.endTimestamp.getTime() - s.startTimestamp.getTime() >= 1800000\r\n        });\r\n\r\n        talent.streakObtained = todaysHits.length > 0;\r\n\r\n        // Calculate whether talent is expiring\r\n\r\n        let hits = sessions\r\n            .filter(s => {\r\n                if (!s.endTimestamp)\r\n                    throw new EvalError(\"Couldn't calculate talent progression. Transcendent timers aren't implemented yet. Data is possibly corrupted.\")\r\n                \r\n                return s.endTimestamp.getTime() - s.startTimestamp.getTime() >= 1800000\r\n            });\r\n\r\n        let latestHit: TalentSession | null = null;\r\n        if (hits.length > 0) {\r\n            latestHit = hits.reduce((cur, next, i, arr) =>\r\n                next.endTimestamp!.getTime() > cur.endTimestamp!.getTime() ? next : cur\r\n            );\r\n        }\r\n\r\n        if (latestHit) {\r\n            // Mark talent as expiring if last hit was before expiry date\r\n            let pastExpiryDate = latestHit.endTimestamp!.getTime() <= currentDate.getTime() - (40 * 60 * 60 * 1000);\r\n            talent.expiring = pastExpiryDate;\r\n\r\n            // Calculate talent burndown\r\n            let expirationDateMs =\r\n                currentDate.getTime() - (56 * 60 * 60 * 1000);\r\n            let hitEndMs = latestHit.endTimestamp!.getTime();\r\n\r\n            let isBurningDown = hitEndMs <= expirationDateMs;\r\n\r\n            talent.burndown = isBurningDown;\r\n\r\n            if (isBurningDown) {\r\n                let nDays = (expirationDateMs - hitEndMs) / (24 * 60 * 60 * 1000);\r\n                let lossModifier = 1 + Math.floor(nDays);\r\n\r\n                // Bye bye :(\r\n\r\n                // talent.goldUltras = Math.max(latestHit.ultrasHeld - lossModifier, 0);\r\n                // talent.progress = 0;\r\n\r\n                let lostProgress = (talent.progressTarget / 7) * lossModifier;\r\n                let finalProgress = talent.progress - lostProgress;\r\n\r\n                if (finalProgress <= 0) {\r\n                    // Overflow loss into previous ultra\r\n\r\n                    // Remove an ultra if there is at least one to remove\r\n                    if (talent.goldUltras > 0) {\r\n                        talent.goldUltras = Math.max(0, talent.goldUltras - 1)\r\n                    } \r\n\r\n                    // Start from the target and remove the overflowed loss\r\n                    talent.progress = talent.progressTarget + finalProgress\r\n                } else {\r\n                    // Remove from current ultra\r\n                    talent.streakCount = 0;\r\n                    talent.progress = finalProgress\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    dispatch({\r\n        type: CALCULATE_PROGRESSION,\r\n        payload: {\r\n            talents: talentsData,\r\n            sessions: sessionsData\r\n        }\r\n    });\r\n}","export type Talent = {\r\n    // TODO: Split into two different data objects?\r\n\r\n    // Talent (TalentInfo)\r\n    id: number\r\n    userId: number\r\n    name: string\r\n\r\n    // TalentProgression\r\n    progress: number\r\n    progressTarget: number\r\n    goldUltras: number\r\n    totalSeconds: number\r\n    streakCount: number\r\n    streakObtained: boolean\r\n    expiring: boolean\r\n    burndown: boolean\r\n}\r\n\r\n// Useful progress targets:\r\n// 40 hours = 144000 seconds\r\n// 25 minutes = 1500 seconds\r\n\r\nexport function createTalent(id: number, name: string, userId: number = 0, progress: number = 0, progressTarget: number = 144000, goldUltras: number = 0, totalSeconds: number = 0, streakCount: number = 0, streakObtained: boolean = false, expiring: boolean = false, burndown: boolean = false): Talent {\r\n    return {\r\n        id: id,\r\n        userId: userId,\r\n        name: name,\r\n        progress: progress,\r\n        progressTarget: progressTarget,\r\n        goldUltras: goldUltras,\r\n        totalSeconds: totalSeconds,\r\n        streakCount: streakCount,\r\n        streakObtained: streakObtained,\r\n        expiring: expiring,\r\n        burndown: burndown\r\n    }\r\n}\r\n\r\nexport function cloneTalent(talent: Talent): Talent {\r\n    return {\r\n        id: talent.id,\r\n        userId: talent.userId,\r\n        name: talent.name,\r\n        progress: talent.progress,\r\n        progressTarget: talent.progressTarget,\r\n        goldUltras: talent.goldUltras,\r\n        totalSeconds: talent.totalSeconds,\r\n        streakCount: talent.streakCount,\r\n        streakObtained: talent.streakObtained,\r\n        expiring: talent.expiring,\r\n        burndown: talent.burndown\r\n    }\r\n}","import { TalentSession } from '../models/TalentSession';\r\nimport { Talent } from '../models/Talent';\r\nimport { START_SESSION, POLL_SESSION, STOP_SESSION, GET_SESSIONS } from './types';\r\nimport { IExchangeModel } from '../models/IExchangeModel';\r\nimport { updateTalent, excludeTalent, includeTalent } from './talentActions';\r\nimport { ITalentIncubator } from '../models/ITalentIncubator';\r\nimport { NullTalentIncubator } from '../models/NullTalentIncubator';\r\nimport { prettyTimeString } from '../utils/time';\r\n\r\nlet sessionModel: IExchangeModel<Talent, TalentSession>;\r\n\r\nexport const configureModel = (model: IExchangeModel<Talent, TalentSession>) => {\r\n    sessionModel = model;\r\n}\r\n\r\nconst assertModelActive = () => {\r\n    if (sessionModel === null || sessionModel === undefined)\r\n        throw new EvalError(\"Could not evaluate dispatch action. configureModel() has not been called on this action script.\");\r\n}\r\n\r\nlet incubator: ITalentIncubator = NullTalentIncubator.Null;\r\n\r\nexport const configureIncubator = (newIncubator: ITalentIncubator) => {\r\n    incubator = newIncubator;\r\n}\r\n\r\nexport const startSession = (talent: Talent) => (dispatch: any) => {\r\n    assertModelActive();\r\n\r\n    if (incubator.isIncubating()) {\r\n        dispatch(stopSession());\r\n    }\r\n\r\n    dispatch(excludeTalent(talent.id));\r\n\r\n    let session: TalentSession = sessionModel.exchange(talent);\r\n\r\n    incubator.incubate(talent, session);\r\n\r\n    dispatch({\r\n        type: START_SESSION,\r\n        payload: {talent, session}\r\n    });\r\n}\r\n\r\nexport const stopSession = () => (dispatch: any) => {\r\n    assertModelActive();\r\n\r\n    let bredTalent: Talent | null = incubator.getTalent();\r\n\r\n    if (bredTalent === null)\r\n        throw new EvalError(\"Couldn't stop session. There was no session to stop.\");\r\n\r\n    dispatch(includeTalent(bredTalent.id));\r\n\r\n    // Save the latest changes before stopping\r\n    dispatch(pollSession());\r\n    incubator.stop();\r\n\r\n    document.title = \"Ultra\";\r\n\r\n    dispatch({\r\n        type: STOP_SESSION\r\n    });\r\n}\r\n\r\nexport const pollSession = () => (dispatch: any) => {\r\n    assertModelActive();\r\n\r\n    let poll = null;\r\n    try {\r\n        poll = incubator.poll();\r\n    } catch (EvalError) {\r\n        // Return to resolve race condition\r\n        return;\r\n    }\r\n\r\n    if (poll === null) return;\r\n\r\n    sessionModel.update(poll.session);\r\n    dispatch(updateTalent(poll.talent));\r\n\r\n    let timeString = prettyTimeString(poll.session.progressObtained);\r\n    document.title = `${timeString} + ${poll.talent.name} - Ultra`;\r\n\r\n    dispatch({\r\n        type: POLL_SESSION,\r\n        payload: poll\r\n    });\r\n}\r\n\r\nexport const getSessions = () => (dispatch: any) => {\r\n    assertModelActive();\r\n    dispatch({\r\n        type: GET_SESSIONS,\r\n        payload: sessionModel.getAll()\r\n    });\r\n}","export const DELETE_TALENT = \"DELETE_TALENT\";\r\nexport const NEW_TALENT = \"NEW_TALENTS\";\r\nexport const GET_TALENTS = \"GET_TALENTS\";\r\nexport const UPDATE_TALENT = \"UPDATE_TALENT\";\r\nexport const EXCLUDE_TALENT = \"EXCLUDE_TALENT\";\r\nexport const INCLUDE_TALENT = \"INCLUDE_TALENT\";\r\n\r\nexport const START_SESSION = \"START_SESSION\";\r\nexport const STOP_SESSION = \"STOP_SESSION\";\r\nexport const POLL_SESSION = \"POLL_SESSION\";\r\nexport const GET_SESSIONS = \"GET_SESSIONS\";\r\n\r\nexport const CALCULATE_PROGRESSION = \"CALCULATE_PROGRESSION\";","import { ITalentIncubator } from \"./ITalentIncubator\";\r\nimport { Talent } from '../models/Talent';\r\nimport { TalentSession } from '../models/TalentSession';\r\n\r\nexport class NullTalentIncubator implements ITalentIncubator {\r\n    static Null = new NullTalentIncubator();\r\n\r\n    incubate(talent: Talent, session: TalentSession): void {}\r\n\r\n    poll(): { talent: Talent; session: TalentSession; } | null {\r\n        return null;\r\n    }\r\n\r\n    stop(): void {}\r\n\r\n    isIncubating(): boolean {\r\n        return false;\r\n    }\r\n\r\n    getTalent(): Talent | null {\r\n        return null;\r\n    }\r\n}","/**\r\n * Calculates a short, lovely looking time string.\r\n * @param ts Total seconds.\r\n * @returns The short, lovely looking time string.\r\n */\r\nexport function prettyTimeString(ts: number) {\r\n    let seconds = Math.round(ts) % 60;\r\n    let minutes = Math.floor(ts / 60) % 60;\r\n    let hours = Math.floor(ts / 3600);\r\n    if (ts < 60) {\r\n        // Show only seconds\r\n        return `${seconds} sec`;\r\n    } else if (ts < (60 * 60)) {\r\n        if (seconds > 9) {\r\n            // Show minutes and seconds\r\n            return `${minutes}:${seconds} min`;\r\n        } else {\r\n            return `${minutes}:0${seconds} min`;\r\n        }\r\n    } else {\r\n        // Show hours and minutes\r\n        if (minutes > 9) {\r\n            return `${hours}:${minutes} hrs`\r\n        } else {\r\n            return `${hours}:0${minutes} hrs`\r\n        }\r\n    }\r\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Polygon_3\",\n  \"data-name\": \"Polygon 3\",\n  d: \"M53.717,0l53.717,90.738H0Z\",\n  transform: \"translate(90.738) rotate(90)\",\n  fill: \"#fff\"\n});\n\nvar SvgPlayButton = function SvgPlayButton(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 90.738,\n    height: 107.434,\n    viewBox: \"0 0 90.738 107.434\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgPlayButton, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/PlayButton.97cd76f7.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"rect\", {\n  id: \"Rectangle_13\",\n  \"data-name\": \"Rectangle 13\",\n  width: 76,\n  height: 76\n});\n\nvar SvgStopButton = function SvgStopButton(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 76,\n    height: 76,\n    viewBox: \"0 0 76 76\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgStopButton, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/StopButton.5eeea1b2.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback } from 'react';\r\n\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { TalentSession } from '../models/TalentSession';\r\nimport { Talent } from '../models/Talent';\r\nimport { cGhostBlue } from './constants';\r\nimport { startSession, stopSession } from '../actions/timerActions';\r\nimport { ReactComponent as PlayButton } from '../assets/images/PlayButton.svg';\r\nimport { ReactComponent as StopButton } from '../assets/images/StopButton.svg';\r\n\r\ntype PlayToggleButtonProps = {\r\n    talent?: Talent,\r\n    session?: TalentSession,\r\n    ghost?: boolean,\r\n    placeholder?: boolean\r\n}\r\n\r\nfunction PlayToggleButton(props: PlayToggleButtonProps) {\r\n    const dispatch = useDispatch();\r\n    const startSessionAction = useCallback(\r\n        () => {\r\n            if (props.talent)\r\n                dispatch(startSession(props.talent))\r\n        }\r\n    , [dispatch, props.talent])\r\n    const stopSessionAction = useCallback((e: React.MouseEvent) => {\r\n        dispatch(stopSession());\r\n    }, [dispatch])\r\n    \r\n    if (props.ghost)\r\n        return <></>\r\n\r\n    if (props.placeholder)\r\n        return <StopButton\r\n            test-id=\"talentTimer.stop\"\r\n            fill={cGhostBlue}\r\n            />\r\n\r\n    if (props.session)\r\n        return <StopButton\r\n            test-id=\"talentTimer.stop\"\r\n            onClick={stopSessionAction}\r\n            fill=\"#FFF\"\r\n            style={{\r\n                cursor: \"pointer\"\r\n            }}\r\n            />\r\n    \r\n    return <PlayButton\r\n        test-id={`talentListItem.${props.talent ? props.talent.id : 0}.startTalent`} \r\n        color=\"success\" \r\n        onClick={startSessionAction}\r\n        style={{\r\n            cursor: \"pointer\",\r\n            transform: \"scale(0.9)\"\r\n        }}\r\n        />\r\n}\r\n\r\nexport default PlayToggleButton;","import React from 'react';\r\n\r\nimport { Talent } from '../models/Talent';\r\nimport { TalentSession } from '../models/TalentSession';\r\nimport { centerCell, bodyFont, cGhostBlue, cMedBlue } from './constants';\r\nimport PlayToggleButton from './PlayToggleButton';\r\n\r\ntype TalentControlsProps = {\r\n    talent: Talent,\r\n    session?: TalentSession,\r\n    placeholder?: boolean,\r\n    ghost?: boolean\r\n}\r\n\r\nfunction TalentControls(props: TalentControlsProps) {\r\n    let textColor: string;\r\n    if (props.placeholder)\r\n        textColor = cGhostBlue\r\n    else if (props.ghost)\r\n        textColor = cMedBlue\r\n    else\r\n        textColor = \"#FFF\";\r\n\r\n    // let minutes = props.talent.totalSeconds / 60;\r\n    // minutes = Math.floor(minutes) % 60;\r\n    // let seconds = Math.round(props.talent.totalSeconds) % 60;\r\n    let hours = props.talent.totalSeconds / 3600;\r\n    hours = Math.ceil(hours * 10) / 10;\r\n\r\n    let sm;\r\n    let ss;\r\n    let sh;\r\n    let sessionTimeString;\r\n    if (props.session) {\r\n        ss = Math.round(props.session.progressObtained) % 60;\r\n        sm = Math.floor(props.session.progressObtained / 60) % 60\r\n        sh = Math.floor(props.session.progressObtained / 3600);\r\n\r\n        if (props.session.progressObtained < 60) {\r\n            sessionTimeString = `${ss}s`;\r\n        } else if (props.session.progressObtained < 3600) {\r\n            sessionTimeString = `${sm}m ${ss}s`;\r\n        } else {\r\n            sessionTimeString = `${sh}h ${sm}m`\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n\r\n        <div style={{\r\n            ...bodyFont,\r\n            color: textColor,\r\n            marginRight: \"32px\"\r\n        }}>\r\n            { props.session || props.placeholder ? \r\n                <div style={{\r\n                    height: \"78px\",\r\n                    display: \"flex\",\r\n                    justifyContent: \"right\",\r\n                }}>\r\n                    <span style={{\r\n                        fontSize: \"1.5rem\",\r\n                        height: \"30px\",\r\n                        margin: \"auto 0\",\r\n                        marginRight: \"8px\"\r\n                    }}>LV. </span>\r\n                    <span style={{\r\n                        fontSize: \"3rem\"\r\n                    }}>\r\n                        {props.talent.goldUltras}\r\n                    </span>\r\n                </div>\r\n            :\r\n                <div style={{\r\n                    height: \"110px\",\r\n                    display: \"flex\",\r\n                    justifyContent: \"right\",\r\n                }}>\r\n                    <span style={{\r\n                        fontSize: \"2.5rem\",\r\n                        height: \"40px\",\r\n                        margin: \"auto 0\",\r\n                        marginRight: \"8px\"\r\n                    }}>LV. </span>\r\n                    <span style={{\r\n                        fontSize: \"4.5rem\"\r\n                    }}>\r\n                        {props.talent.goldUltras}\r\n                    </span>\r\n                </div>\r\n            }\r\n            <div style={{\r\n                display: \"flex\",\r\n                justifyContent: \"right\",\r\n                height: \"5px\"\r\n            }}>\r\n                <div style={{\r\n                    ...centerCell,\r\n                    fontSize: \"2rem\",\r\n                    mixBlendMode: props.ghost || props.placeholder ?\r\n                        \"exclusion\" : \"normal\"\r\n                }}><span role=\"img\" aria-label=\"Streak\">🔥</span> </div>\r\n                <div style={{\r\n                    ...centerCell,\r\n                    fontSize: \"2.8rem\",\r\n                }}>{props.talent.streakCount}</div>\r\n            </div>\r\n            { props.session ? \r\n                <>\r\n                    <div style={{\r\n                        fontSize: \"3rem\",\r\n                        height: \"52px\"\r\n                    }}>\r\n                        {sessionTimeString}\r\n                    </div>\r\n                    <div style={{\r\n                        fontSize: \"1rem\",\r\n                        textAlign: \"right\"\r\n                    }}>\r\n                        {hours} hours\r\n                    </div>\r\n                </>\r\n            :\r\n            props.placeholder ?\r\n                <>\r\n                    <div style={{\r\n                        fontSize: \"3rem\",\r\n                        height: \"52px\"\r\n                    }}>\r\n                        0 hours\r\n                    </div>\r\n                    <div style={{\r\n                        fontSize: \"1rem\",\r\n                        textAlign: \"right\"\r\n                    }}>\r\n                        {hours} hours\r\n                    </div>\r\n                </>\r\n            :\r\n                <div style={{\r\n                    fontSize: \"1.8rem\",\r\n                    marginTop: \"12px\",\r\n                    marginBottom: \"12px\"\r\n                }}>\r\n                    {hours} hours\r\n                </div>\r\n            }\r\n        </div>\r\n\r\n        <PlayToggleButton talent={props.talent}\r\n            session={props.session}\r\n            ghost={props.ghost}\r\n            placeholder={props.placeholder}\r\n            />\r\n            \r\n        </>\r\n    )\r\n}\r\n\r\nexport default TalentControls;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Icon_material-edit\",\n  \"data-name\": \"Icon material-edit\",\n  d: \"M4.5,25.875V31.5h5.625l16.59-16.59L21.09,9.285ZM31.065,10.56a1.494,1.494,0,0,0,0-2.115l-3.51-3.51a1.494,1.494,0,0,0-2.115,0L22.695,7.68l5.625,5.625,2.745-2.745Z\",\n  transform: \"translate(-4.5 -4.496)\",\n  fill: \"#757575\"\n});\n\nvar SvgEditIcon = function SvgEditIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 27.004,\n    height: 27.004,\n    viewBox: \"0 0 27.004 27.004\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgEditIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/EditIcon.42beb80d.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Icon_awesome-trash-alt\",\n  \"data-name\": \"Icon awesome-trash-alt\",\n  d: \"M2.25,32.625A3.375,3.375,0,0,0,5.625,36h20.25a3.375,3.375,0,0,0,3.375-3.375V9h-27Zm19.125-18a1.125,1.125,0,0,1,2.25,0v15.75a1.125,1.125,0,0,1-2.25,0Zm-6.75,0a1.125,1.125,0,0,1,2.25,0v15.75a1.125,1.125,0,0,1-2.25,0Zm-6.75,0a1.125,1.125,0,0,1,2.25,0v15.75a1.125,1.125,0,0,1-2.25,0ZM30.375,2.25H21.938L21.277.935A1.688,1.688,0,0,0,19.765,0H11.728a1.668,1.668,0,0,0-1.5.935L9.563,2.25H1.125A1.125,1.125,0,0,0,0,3.375v2.25A1.125,1.125,0,0,0,1.125,6.75h29.25A1.125,1.125,0,0,0,31.5,5.625V3.375A1.125,1.125,0,0,0,30.375,2.25Z\",\n  fill: \"#757575\"\n});\n\nvar SvgDeleteIcon = function SvgDeleteIcon(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 31.5,\n    height: 36,\n    viewBox: \"0 0 31.5 36\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDeleteIcon, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/DeleteIcon.27e494ac.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useState } from 'react';\r\n\r\nimport { Row, Col } from 'reactstrap';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { ReactComponent as EditIcon } from '../assets/images/EditIcon.svg';\r\nimport { ReactComponent as DeleteIcon } from '../assets/images/DeleteIcon.svg';\r\nimport { centerCell } from './constants';\r\nimport { deleteTalent } from '../actions/talentActions';\r\n\r\n\r\nfunction TalentRightClickMenu(props: any) {\r\n    const dispatch = useDispatch();\r\n    const deleteAction = useCallback(() => {\r\n        dispatch(deleteTalent(props.talent.id));\r\n    }, [dispatch, props.talent.id]);\r\n\r\n    return (\r\n        <div id=\"talent-right-click-menu\" style={{\r\n            position: \"absolute\",\r\n            top: props.y,\r\n            left: props.x,\r\n            height: \"252px\",\r\n            width: \"209px\",\r\n            boxShadow: \"3px 3px 6px 0px rgba(0, 0, 0, 0.16)\",\r\n            backgroundColor: \"#FFF\",\r\n            zIndex: 50,\r\n            borderRadius: \"20px\",\r\n        }}>\r\n            <MenuItem icon={EditIcon} text=\"Edit\" click={props.edit} style={{\r\n                marginTop: \"0.9rem\"\r\n            }} />\r\n            <MenuItem icon={DeleteIcon} text=\"Delete\" click={deleteAction} />\r\n        </div>\r\n    )\r\n}\r\n\r\nfunction MenuItem(props: any) {\r\n    const [ hovering, setHovering ] = useState(false);\r\n    const mouseEnter = useCallback(() => {\r\n        setHovering(true);\r\n    }, []);\r\n    const mouseLeave = useCallback(() => {\r\n        setHovering(false);\r\n    }, []);\r\n    return (\r\n        <Row className=\"mx-auto p-2 no-gutters\"\r\n        style={{\r\n            fontFamily: \"Tw Cen MT\",\r\n            fontSize: \"1.5rem\",\r\n            color: \"#757575\",\r\n            backgroundColor: hovering ? \"rgba(215, 214, 255, 0.28)\" : \"transparent\",\r\n            borderRadius: \"21px\",\r\n            maxWidth: \"91%\",\r\n            ...props.style\r\n        }}\r\n        onMouseEnter={mouseEnter}\r\n        onMouseLeave={mouseLeave}\r\n        onMouseUp={props.click}>\r\n            <Col style={{\r\n                ...centerCell,\r\n                maxWidth: \"25%\"\r\n                }}>\r\n                <props.icon height=\"18px\" />\r\n            </Col>\r\n            <Col style={{...centerCell,\r\n                justifyContent: \"left\"}}>\r\n                {props.text}\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default TalentRightClickMenu;","import React, { useCallback, useState, useEffect, useRef } from \"react\";\r\n\r\nimport { Col, Row } from 'reactstrap';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { Talent } from \"../models/Talent\";\r\nimport { cMedBlue, bodyFont, centerCell, cGhostBlue } from './constants';\r\nimport Ultra from '../components/Ultra';\r\nimport TalentControls from './TalentControls';\r\nimport TalentRightClickMenu from './TalentRightClickMenu';\r\nimport { updateTalent } from \"../actions/talentActions\";\r\n\r\nexport type TalentListItemProps = {\r\n    talent: Talent\r\n    beginEditing?: boolean\r\n}\r\n\r\nfunction TalentListItem(props: TalentListItemProps) {\r\n    const dispatch = useDispatch();\r\n\r\n    let blockCancel = useRef(false);\r\n\r\n    const [ editing, setEditing ] = useState(props.beginEditing);\r\n    const enableEditing = useCallback(() => {\r\n        setEditing(true);\r\n        blockCancel.current = true;\r\n        setTimeout(() => blockCancel.current = false, 100);\r\n    }, [setEditing, blockCancel]);\r\n\r\n    // Stop editing if focus is lost\r\n    useEffect(() => {\r\n        const handleDisableEditingOnDefocus = (e: any) => {\r\n            let target: HTMLElement = e.target;\r\n\r\n            if (blockCancel.current) return;\r\n\r\n            if (target.id !== `talent-nameInput`) {\r\n                setEditing(false);\r\n            }\r\n        }\r\n        document.addEventListener(\"click\", handleDisableEditingOnDefocus);\r\n        return () => {\r\n            document.removeEventListener(\"click\", handleDisableEditingOnDefocus);\r\n        }\r\n    }, []);\r\n\r\n    const [ rightClick, setRightClick ] = useState(false);\r\n    const [ rightClickCoords, setRightClickCoords ] = useState({x: 0, y: 0});\r\n\r\n    const openRightClickMenu = useCallback((e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        setRightClick(true);\r\n        setRightClickCoords({x: e.pageX, y: e.pageY});\r\n    }, [setRightClick, setRightClickCoords]);\r\n\r\n    // Close right click menu if focus is lost\r\n    useEffect(() => {\r\n        const handleCloseOnDefocus = (e: any) => {\r\n            let target: HTMLElement = e.target;\r\n            if (target.id !== `talent-${props.talent.id}-right-click-menu`) {\r\n                setRightClick(false);\r\n            }\r\n        }\r\n        document.addEventListener(\"click\", handleCloseOnDefocus);\r\n        return () => {\r\n            document.removeEventListener(\"click\", handleCloseOnDefocus);\r\n        }\r\n    }, [props.talent.id]);\r\n\r\n    const progressDisplayValue = useCallback((id: number) => {\r\n        let overflow = props.talent.goldUltras % 3;\r\n        if (overflow === id) {\r\n            // if (props.talent.streakObtained) {\r\n                return props.talent.progress;\r\n            // } else {\r\n            //     // Calculated from 5.7 / 0.5 ((40 hrs/7) / 0.5hrs)\r\n            //     return props.talent.progress * 11.4;\r\n            // }\r\n        }\r\n        if (overflow > id) return props.talent.progressTarget;\r\n        return 0\r\n    }, [props.talent]);\r\n    const closeTargetDisplayValue = useCallback((id: number) => {\r\n        if (props.talent.streakObtained) return 0;\r\n\r\n        let overflow = props.talent.goldUltras % 3;\r\n        if (overflow === id) {\r\n            // if (props.talent.streakObtained) {\r\n                return (props.talent.progress / props.talent.progressTarget) + 1 / 7;\r\n            // } else {\r\n            //     // Calculated from 5.7 / 0.5 ((40 hrs/7) / 0.5hrs)\r\n            //     return props.talent.progress * 11.4;\r\n            // }\r\n        }\r\n        if (overflow > id) return props.talent.progressTarget;\r\n        return 0\r\n    }, [props.talent]);\r\n\r\n    let background;\r\n    if (editing) {\r\n        background = cGhostBlue;\r\n    } else if (props.talent.burndown) {\r\n        background = \"radial-gradient(circle at top left, rgba(255,201,22,1) 0%, rgba(255, 236, 172, 1) 100%)\"\r\n    } else if (props.talent.expiring) {\r\n        background = \"radial-gradient(circle at top left, rgba(255,74,152,1) 0%, rgba(255,201,22,1) 100%)\"\r\n    } else if (props.talent.streakObtained) {\r\n        background = \"radial-gradient(circle at top left, rgba(142,138,255,1) 0%, rgba(255,74,152,1) 100%)\"\r\n    } else {\r\n        background = \"radial-gradient(circle at top left, rgba(142,138,255,1) 0%, rgba(255,74,152,1) 50%, rgba(255,201,22,1) 100%)\"\r\n    }\r\n\r\n    const [ name, setName ] = useState(props.talent.name);\r\n    const onEditNameChange = useCallback((e: any) => {\r\n        setName(e.target.value);\r\n    }, [setName]);\r\n    const onEditNameFinished = useCallback((e: any) => {\r\n        e.preventDefault();\r\n        props.talent.name = name;\r\n        setEditing(false);\r\n        dispatch(updateTalent(props.talent));\r\n    }, [name, setEditing, props.talent, dispatch]);\r\n\r\n    return (\r\n        <Row id={`talent-${props.talent.id}`}\r\n            className=\"mb-4 mx-auto no-gutters\"\r\n            style={{\r\n                maxWidth: \"95vw\",\r\n                background: background,\r\n                minHeight: \"190px\",\r\n                borderRadius: \"20px\"\r\n            }}\r\n            onContextMenu={openRightClickMenu}>\r\n\r\n            { rightClick ? \r\n                <TalentRightClickMenu\r\n                    talent={props.talent}\r\n                    edit={enableEditing}\r\n                    x={rightClickCoords.x}\r\n                    y={rightClickCoords.y}\r\n                    />\r\n            :\r\n                <></>\r\n            }\r\n\r\n            <Col style={{...centerCell,\r\n                maxWidth: \"33.33%\",\r\n                minWidth: \"450px\"\r\n                }}>\r\n                { editing ?\r\n                    <form onSubmit={onEditNameFinished} style={{\r\n                        maxWidth: \"100%\"\r\n                    }}>\r\n                        <input id=\"talent-nameInput\" style={{\r\n                            ...bodyFont,\r\n                            backgroundColor: \"transparent\",\r\n                            border: \"none\",\r\n                            color: cMedBlue,\r\n                            fontSize: \"3rem\",\r\n                            padding: \"0\",\r\n                            textAlign: \"center\",\r\n                            maxWidth: \"100%\"\r\n                        }}\r\n                        value={name}\r\n                        onChange={onEditNameChange}\r\n                        ></input>\r\n                    </form>\r\n                :\r\n                    <div test-id=\"talentName\" style={{\r\n                        ...bodyFont,\r\n                        color: \"#FFF\",\r\n                        fontSize: \"3rem\",\r\n                    }}>\r\n                        {props.talent.name}\r\n                    </div>\r\n                }\r\n            </Col>\r\n\r\n            <Col style={{...centerCell,\r\n                maxWidth: \"33.33%\",\r\n                minWidth: \"450px\"\r\n            }}>\r\n                <Row>\r\n                    <Col>\r\n                        <Ultra progress={progressDisplayValue(0)}\r\n                            progressTarget={props.talent.progressTarget}\r\n                            background={editing ? cMedBlue : undefined}\r\n                            backgroundOpacity=\"0.5\"\r\n                            closeTarget={closeTargetDisplayValue(0)}\r\n                            />\r\n                    </Col>\r\n                    <Col>\r\n                        <Ultra progress={progressDisplayValue(1)}\r\n                            progressTarget={props.talent.progressTarget}\r\n                            background={editing ? cMedBlue : undefined}\r\n                            backgroundOpacity=\"0.5\"\r\n                            closeTarget={closeTargetDisplayValue(1)}\r\n                            />\r\n                    </Col>\r\n                    <Col>\r\n                        <Ultra progress={progressDisplayValue(2)}\r\n                            progressTarget={props.talent.progressTarget}\r\n                            background={editing ? cMedBlue : undefined}\r\n                            backgroundOpacity=\"0.5\"\r\n                            closeTarget={closeTargetDisplayValue(2)}\r\n                            />\r\n                    </Col>\r\n                </Row>\r\n            </Col>\r\n\r\n            <Col style={{...centerCell,\r\n                maxWidth: \"33.33%\",\r\n                minWidth: \"450px\"\r\n            }}>\r\n                <TalentControls talent={props.talent} ghost={editing ? true : undefined} />\r\n            </Col>\r\n\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default TalentListItem;","import React from 'react';\r\n\r\nimport TalentListItem from './TalentListItem';\r\nimport { Talent } from '../models/Talent';\r\n\r\ntype TalentListProps = {\r\n    talents: Talent[]\r\n    lastBeginsEditing?: boolean\r\n}\r\n\r\n/**\r\n * A list of talents.\r\n */\r\nfunction TalentList(props: TalentListProps) {\r\n    const talents = props.talents.map(\r\n        (talent, i, arr) => <TalentListItem\r\n            key={talent.id}\r\n            talent={talent}\r\n            beginEditing={props.lastBeginsEditing && i === arr.length - 1}\r\n        />\r\n    );\r\n    return (\r\n        <>\r\n        {talents}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default TalentList;","import React, { useCallback } from 'react';\r\n\r\nimport { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { Row, Col } from 'reactstrap';\r\n\r\nimport { Talent, createTalent } from '../models/Talent';\r\nimport { pollSession } from '../actions/timerActions';\r\nimport { TalentSession } from '../models/TalentSession';\r\nimport { medBlue, bodyFont, centerCell } from './constants';\r\nimport Ultra from '../components/Ultra';\r\nimport TalentControls from './TalentControls';\r\n\r\ntype TalentTimerProps = {\r\n    talent: Talent | null,\r\n    session: TalentSession | null\r\n}\r\n\r\nfunction TalentTimer(props: TalentTimerProps) {\r\n    let timing = props.talent !== null && props.session !== null;\r\n\r\n    const dispatch = useDispatch();\r\n    const [ timer, setTimer ] = useState(0);\r\n\r\n    if (timing && !timer) {\r\n        setTimer(\r\n            setInterval(() => {\r\n                dispatch(pollSession())\r\n            }, 200)\r\n        );\r\n    }\r\n\r\n    if (!timing && timer) {\r\n        clearInterval(timer);\r\n        setTimer(0);\r\n    }\r\n\r\n    if (timing)\r\n        return <TalentProgress talent={props.talent!} session={props.session!} />\r\n    else\r\n        return <TalentPlaceholder />\r\n}\r\n\r\ntype TalentProgressProps  = {\r\n    talent: Talent,\r\n    session: TalentSession\r\n}\r\n\r\nfunction TalentProgress(props: TalentProgressProps) {\r\n    const progressDisplayValue = useCallback((id: number) => {\r\n        let overflow = props.talent.goldUltras % 3;\r\n        if (overflow === id) {\r\n            if (props.talent.streakObtained) {\r\n                return props.talent.progress;\r\n            } else {\r\n                return props.talent.progress + props.session.progressObtained * 11;\r\n            }\r\n        }\r\n        if (overflow > id) return props.talent.progressTarget;\r\n        return 0\r\n    }, [props.talent, props.session]);\r\n\r\n    const closeTargetDisplayValue = useCallback((id: number) => {\r\n        if (props.talent.streakObtained) return 0;\r\n\r\n        let overflow = props.talent.goldUltras % 3;\r\n        if (overflow === id)\r\n            return (props.talent.progress / props.talent.progressTarget) + 1 / 7;\r\n        if (overflow > id) return props.talent.progressTarget;\r\n        return 0\r\n    }, [props.talent]);\r\n\r\n    const beingTimed = useCallback((id: number) => {\r\n        let overflow = props.talent.goldUltras % 3;\r\n        if (overflow === id)\r\n            return true;\r\n        return false;\r\n    }, [props.talent]);\r\n\r\n    let background = props.talent.streakObtained ?\r\n        \"radial-gradient(circle at top left, rgba(142,138,255,1) 0%, rgba(69,62,255,1) 75%, rgba(69,62,255,1) 100%)\"\r\n        :\r\n        \"radial-gradient(circle at top left, rgba(142,138,255,1) 0%, rgba(255,74,152,1) 50%, rgba(255,201,22,1) 100%)\"\r\n\r\n    return (\r\n        <Row className=\"mb-3 mx-auto no-gutters\" style={{\r\n            maxWidth: \"95vw\",\r\n            minHeight: \"190px\",\r\n            borderRadius: \"20px\",\r\n            background: background\r\n        }}>\r\n            <Col style={{...centerCell}}>\r\n                <div test-id=\"talentTimer.talentName\" className=\"title\"\r\n                    style={{...bodyFont,\r\n                        color: \"#FFF\",\r\n                        fontSize: \"3rem\"}}>\r\n                    {props.talent.name}\r\n                </div>\r\n            </Col>\r\n            <Col style={{...centerCell}}>\r\n                <Row>\r\n                    <Col>\r\n                        <Ultra progress={progressDisplayValue(0)}\r\n                            progressTarget={props.talent.progressTarget}\r\n                            backgroundOpacity=\"1\"\r\n                            closeTarget={closeTargetDisplayValue(0)}\r\n                            beingTimed={beingTimed(0)}\r\n                            />\r\n                    </Col>\r\n                    <Col>\r\n                        <Ultra progress={progressDisplayValue(1)}\r\n                            progressTarget={props.talent.progressTarget}\r\n                            backgroundOpacity=\"1\"\r\n                            closeTarget={closeTargetDisplayValue(1)}\r\n                            beingTimed={beingTimed(1)}\r\n                            />\r\n                    </Col>\r\n                    <Col>\r\n                        <Ultra progress={progressDisplayValue(2)}\r\n                            progressTarget={props.talent.progressTarget}\r\n                            backgroundOpacity=\"1\"\r\n                            closeTarget={closeTargetDisplayValue(2)}\r\n                            beingTimed={beingTimed(2)}\r\n                            />\r\n                    </Col>\r\n                </Row>\r\n            </Col>\r\n            <Col style={{...centerCell}}>\r\n                <TalentControls talent={props.talent} session={props.session} />\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\nconst dummyTalent = createTalent(0, \"Start a talent to begin earning ultra.\", 7, 0, 1, 0, 0, 0);\r\n\r\nfunction TalentPlaceholder() {\r\n    return (\r\n        <Row className=\"mb-4 mx-auto no-gutters\" style={{\r\n            maxWidth: \"95vw\",\r\n            minHeight: \"190px\",\r\n            borderStyle: \"dashed\",\r\n            borderColor: \"#D7D6FF\",\r\n            borderWidth: \"7px\",\r\n            borderRadius: \"20px\"\r\n        }}>\r\n            <Col style={{\r\n                ...bodyFont,\r\n                ...medBlue,\r\n                ...centerCell,\r\n                fontSize: \"3rem\",\r\n                width: \"60%\",\r\n            }}>\r\n                Start a talent to begin earning ultra.\r\n            </Col>\r\n            <Col style={{...centerCell}}>\r\n                <Row>\r\n                    <Col>\r\n                        <Ultra progress={0}\r\n                            progressTarget={1}\r\n                            />\r\n                    </Col>\r\n                    <Col>\r\n                        <Ultra progress={0}\r\n                            progressTarget={1}\r\n                            />\r\n                    </Col>\r\n                    <Col>\r\n                        <Ultra progress={0}\r\n                            progressTarget={1}\r\n                            />\r\n                    </Col>\r\n                </Row>\r\n            </Col>\r\n            <Col style={{...centerCell}}>\r\n                <TalentControls talent={dummyTalent} placeholder />\r\n            </Col>\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default TalentTimer;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Polygon_7\",\n  \"data-name\": \"Polygon 7\",\n  d: \"M99,0l99,172H0Z\",\n  fill: \"#8e8aff\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  id: \"Polygon_8\",\n  \"data-name\": \"Polygon 8\",\n  d: \"M56,0l56,97H0Z\",\n  transform: \"translate(0 75)\",\n  fill: \"#453eff\"\n});\n\nvar _ref4 = /*#__PURE__*/React.createElement(\"text\", {\n  id: \"Ultra\",\n  transform: \"translate(211 123)\",\n  fill: \"#453eff\",\n  fontSize: 117,\n  fontFamily: \"TwCenMT-Regular, Tw Cen MT\"\n}, React.createElement(\"tspan\", {\n  x: 0,\n  y: 0\n}, \"Ultra\"));\n\nvar SvgLogo = function SvgLogo(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    id: \"Component_3_1\",\n    \"data-name\": \"Component 3 \\\\u2013 1\",\n    width: 443,\n    height: 172,\n    viewBox: \"0 0 443 172\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2, _ref3, _ref4);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgLogo, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/Logo.a0de5b4c.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\n\r\nimport { ReactComponent as Logo } from '../assets/images/Logo.svg';\r\n\r\nfunction Header() {\r\n    return (\r\n        <Logo style={{\r\n            maxHeight: \"15vh\",\r\n            marginTop: \"8px\",\r\n            marginBottom: \"35px\"\r\n        }} />\r\n    )\r\n}\r\n\r\nexport default Header;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"g\", {\n  id: \"Icon_ionic-ios-add-circle-outline\",\n  \"data-name\": \"Icon ionic-ios-add-circle-outline\",\n  transform: \"translate(-3.375 -3.375)\"\n}, React.createElement(\"path\", {\n  id: \"Path_1\",\n  \"data-name\": \"Path 1\",\n  d: \"M35.476,21.98H26.035V12.539a2.028,2.028,0,1,0-4.055,0V21.98H12.539a1.942,1.942,0,0,0-2.028,2.028,1.963,1.963,0,0,0,2.028,2.028H21.98v9.441A1.964,1.964,0,0,0,24.008,37.5a2.017,2.017,0,0,0,2.028-2.028V26.035h9.441a2.028,2.028,0,1,0,0-4.055Z\",\n  transform: \"translate(5.726 5.726)\",\n  fill: \"#8e8aff\"\n}), React.createElement(\"path\", {\n  id: \"Path_2\",\n  \"data-name\": \"Path 2\",\n  d: \"M29.733,6.923A22.814,22.814,0,0,1,45.865,45.865,22.814,22.814,0,0,1,13.6,13.6,22.659,22.659,0,0,1,29.733,6.923m0-3.548A26.358,26.358,0,1,0,56.092,29.733,26.354,26.354,0,0,0,29.733,3.375Z\",\n  fill: \"#8e8aff\"\n}));\n\nvar SvgAddTalentButton = function SvgAddTalentButton(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 52.717,\n    height: 52.717,\n    viewBox: \"0 0 52.717 52.717\",\n    ref: svgRef\n  }, props), title ? React.createElement(\"title\", null, title) : null, _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgAddTalentButton, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/AddTalentButton.4b40846d.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useState, useEffect } from 'react';\r\n\r\nimport { useDispatch } from 'react-redux';\r\nimport { ReactComponent as AddTalentButton } from '../assets/images/AddTalentButton.svg';\r\nimport { cGhostBlue, cMedBlue } from './constants';\r\nimport { newTalent } from '../actions/talentActions';\r\n\r\nfunction NewTalentButton() {\r\n    const dispatch = useDispatch();\r\n    \r\n    const [opening, setOpening] = useState(false);\r\n    const newTalentAction = useCallback(() => {\r\n        setOpening(true);\r\n        setTimeout(() => {\r\n            window.scrollTo(0, window.outerHeight);\r\n        }, 150);\r\n        setTimeout(() => {\r\n            setOpening(false);\r\n            dispatch(newTalent(\"Your New Talent\"));\r\n        }, 300);\r\n    }, [dispatch, setOpening])\r\n\r\n    const conditionalAnimation = opening ? {\r\n        transitionDuration: \"300ms\",\r\n        transitionTimingFunction: \"ease-out\"\r\n    } : {}\r\n\r\n    let [showHint, setShowHint] = useState(false);\r\n    useEffect(() => {\r\n        // if (localStorage.getItem(\"showHint\") === null) {\r\n        //     setShowHint(true);\r\n        // }\r\n\r\n        // localStorage.setItem(\"showHint\", \"false\");\r\n\r\n        // TODO: Change how hinting works in the future. For now, this will\r\n        // remain always-on.\r\n        setShowHint(true);\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <div id=\"new-talent-button\"\r\n            className=\"p-2 mx-auto\"\r\n            style={{\r\n                width: opening ? \"95vw\" : \"25vw\",\r\n                height: opening ? \"190px\" : \"46px\",\r\n                backgroundColor: cGhostBlue,\r\n                borderRadius: \"41px\",\r\n                cursor: \"pointer\",\r\n                ...conditionalAnimation\r\n            }}\r\n            onClick={newTalentAction}>\r\n                { opening ?\r\n                    <></>\r\n                :\r\n                    <AddTalentButton height=\"30px\" />\r\n                }\r\n            </div>\r\n            { showHint ? \r\n                <div style={{\r\n                    color: cMedBlue,\r\n                    fontFamily: \"Tw Cen MT\",\r\n                    fontSize: \"1.5rem\",\r\n                    marginTop: \"8px\"\r\n                }}>\r\n                Right click talents to edit or delete them.\r\n                </div>\r\n            :\r\n                <></>\r\n            }\r\n        </>\r\n    )\r\n}\r\n\r\nexport default NewTalentButton;","import React, { useEffect, useState, useCallback } from 'react';\r\n\r\nimport { advanceTo } from 'jest-date-mock';\r\n\r\nimport { cGhostBlue, cUltraBlue } from './constants';\r\n\r\n\r\nfunction UltraConsole() {\r\n    let con = JSON.parse(localStorage.getItem(\"chronobreak\") ?? \"false\");\r\n\r\n    useEffect(() => {\r\n        if (!con) return;\r\n\r\n        let dayJump = parseInt(localStorage.getItem(\"dayjump\") ?? \"0\");\r\n        let timeModifier = parseInt(localStorage.getItem(\"timemod\") ?? \"1\");\r\n    \r\n        let today = JSON.parse(localStorage.getItem(\"timehack\") ?? JSON.stringify(new Date()));\r\n    \r\n        // Jump forward in time\r\n        let tomorrow = new Date(today);\r\n        tomorrow.setDate(tomorrow.getDate() + dayJump);\r\n        advanceTo(tomorrow)\r\n\r\n        if (dayJump !== 0) {\r\n            localStorage.setItem(\"dayjump\", \"0\");\r\n        }\r\n    \r\n        // Emulate temporal progression\r\n        setInterval(() => {\r\n            let tomorrow = new Date();\r\n            tomorrow.setMilliseconds(tomorrow.getMilliseconds() + 100 * timeModifier);\r\n            advanceTo(tomorrow);\r\n            localStorage.setItem(\"timehack\", JSON.stringify(tomorrow));\r\n        }, 100);\r\n    }, [con]);\r\n\r\n    let previousLogs: string[] = JSON.parse(localStorage.getItem(\"logs\") ?? \"[]\");\r\n\r\n    const [ entry, setEntry ] = useState(\"\");\r\n    const [ log, setLog ] = useState(previousLogs);\r\n\r\n    const typeCommandEntry = useCallback((e: any) => {\r\n        setEntry(e.target.value);\r\n    }, [setEntry])\r\n    const fireCommandEntry = useCallback((e: any) => {\r\n        function niceDate(date: Date): string {\r\n            let raw = date.toString();\r\n            const [, month, day, year, time ] = raw.split(\" \");\r\n            return `${month} ${day} ${year} ${time}`;\r\n        }\r\n\r\n        function scribe(text: string) {\r\n            let newLog = [\r\n                ...log,\r\n                `${niceDate(new Date())}: ${text}`\r\n            ];\r\n            setLog(newLog);\r\n            localStorage.setItem(\"logs\", JSON.stringify(newLog));\r\n        }\r\n\r\n        e.preventDefault();\r\n        setEntry(\"\");\r\n\r\n        let strVal: string = entry;\r\n        if (strVal.startsWith(\"jump \") &&\r\n            !isNaN(parseInt(strVal.split(\" \")[1]))) {\r\n            let timeComponent = strVal.split(\" \");\r\n            let nDays = timeComponent[1];\r\n            localStorage.setItem(\"dayjump\", nDays);\r\n\r\n            scribe(`Jumping ahead by ${nDays} days...`);\r\n\r\n            window.location.reload();\r\n        } else if (strVal.startsWith(\"accelerate\")) {\r\n            let split = strVal.split(\" \");\r\n\r\n            if (split.length === 1) {\r\n                scribe(`Time acceleration is currently set to ${localStorage.getItem(\"timemod\")}x.`);\r\n            } else if (!isNaN(parseInt(strVal.split(\" \")[1]))) {\r\n                let mod = split[1];\r\n                localStorage.setItem(\"timemod\", mod);\r\n\r\n                scribe(`Accelerating time by ${mod}x...`);\r\n\r\n                window.location.reload();\r\n            }\r\n        } else if (strVal === \"clear\") {\r\n            setLog([]);\r\n            localStorage.setItem(\"logs\", \"[]\");\r\n        } else if (strVal === \"help\") {\r\n            scribe(\"HELP: // accelerate X - Sets the speed that time moves to a multiplier of X. Not providing X will show the current speed modifier for time. // jump X - Jumps forward X days in time. // clear - Clears console output.\");\r\n        } else {\r\n            scribe(`\"${strVal}\" isn't a valid input. Do you belong here?`);\r\n        }\r\n\r\n        setTimeout(() => {\r\n            let dLog = document.getElementById(\"eco\");\r\n            dLog?.scrollTo(0, dLog.scrollHeight);\r\n        }, 10);\r\n    }, [entry, setEntry, log, setLog])\r\n\r\n    setTimeout(() => {\r\n        let dLog = document.getElementById(\"eco\");\r\n        dLog?.scrollTo(0, dLog.scrollHeight);\r\n    }, 10);\r\n\r\n    if (!con)\r\n        return <></>\r\n\r\n    return (\r\n        <div className=\"mt-4 d-inline-block\" style={{\r\n            border: `8px solid ${cGhostBlue}`,\r\n            borderRadius: \"4px\",\r\n            width: \"33vw\",\r\n            minHeight: \"20vh\",\r\n            backgroundColor: cGhostBlue\r\n        }}>\r\n            <span style={{\r\n                fontFamily: \"Inter\",\r\n                color: cUltraBlue,\r\n                fontSize: \"3rem\"\r\n            }}>\r\n                Chronobreak\r\n            </span>\r\n            <div id=\"eco\" className=\"mx-auto p-1\" style={{\r\n                backgroundColor: \"#1C1E26\",\r\n                fontFamily: \"Inter\",\r\n                color: cGhostBlue,\r\n                minHeight: \"16vh\",\r\n                maxHeight: \"16vh\",\r\n                textAlign: \"left\",\r\n                borderBottom: \"none\",\r\n                overflowY: \"scroll\"\r\n            }}>\r\n                {log.map((el: string, i: number, arr: string[]) => <div key={i}>{el}</div>)}\r\n            </div>\r\n            <form onSubmit={fireCommandEntry}>\r\n                <input className=\"p-1\"\r\n                style={{\r\n                    backgroundColor: \"#1C1E26\",\r\n                    fontFamily: \"Inter\",\r\n                    minHeight: \"4vh\",\r\n                    width: \"100%\",\r\n                    color: cGhostBlue,\r\n                    border: \"none\",\r\n                    borderTop: \"1px solid #FFF\",\r\n                }}\r\n                value={entry}\r\n                onChange={typeCommandEntry}>\r\n                </input>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UltraConsole;","import React, { useEffect, useRef } from 'react';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport ReactGA from 'react-ga';\r\n\r\nimport './App.css';\r\nimport { RootState } from './store';\r\nimport TalentList from './components/TalentList';\r\nimport TalentTimer from './components/TalentTimer';\r\nimport { getTalents, calculateTalentProgression } from './actions/talentActions';\r\nimport Header from './components/Header';\r\nimport NewTalentButton from './components/NewTalentButton';\r\nimport { getSessions } from './actions/timerActions';\r\nimport UltraConsole from './components/UltraConsole';\r\n\r\nfunction App() {\r\n    const dispatch = useDispatch();\r\n    const eco = useRef(\"\");\r\n    useEffect(() => {\r\n        ReactGA.initialize('UA-49256271-5');\r\n        ReactGA.pageview('/talents');\r\n\r\n        dispatch(getTalents());\r\n        dispatch(getSessions());\r\n        dispatch(calculateTalentProgression());\r\n\r\n        let tm = parseInt(localStorage.getItem(\"timemod\") ?? \"1\");\r\n        tm = JSON.parse(localStorage.getItem(\"chronobreak\") ?? \"false\") ? tm : 1;\r\n        let tickInterval = (30 * 60 * 1000) / tm;\r\n        setInterval(() => {\r\n            dispatch(getSessions());\r\n            dispatch(calculateTalentProgression());\r\n        }, tickInterval)\r\n\r\n        document.addEventListener(\"keydown\", (ev: KeyboardEvent) => {\r\n            eco.current += ev.key;\r\n            if (eco.current === \"chronobreak\") {\r\n                ReactGA.event({\r\n                    category: 'User',\r\n                    action: 'Broke into Chronobreak'\r\n                });\r\n\r\n                let bVal: boolean = JSON.parse(localStorage.getItem(\"chronobreak\") ?? \"false\");\r\n                localStorage.setItem(\"chronobreak\", `${!bVal}`);\r\n                document.location.reload();\r\n            }\r\n        });\r\n    }, [dispatch]);\r\n\r\n    const state = useSelector((state: RootState) => state);\r\n    const talents = state.talents.items;\r\n    const { talent, session } = state.timer.session;\r\n    const lastBeginsEditing = state.talents.lastBeginsEditing;\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <Header />\r\n            <TalentTimer talent={talent} session={session} />\r\n            <TalentList talents={talents}\r\n                lastBeginsEditing={lastBeginsEditing}\r\n                />\r\n            <NewTalentButton />\r\n            <UltraConsole />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config: any) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: any, config: any) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: any, config: any) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { NEW_TALENT, DELETE_TALENT, GET_TALENTS, EXCLUDE_TALENT, INCLUDE_TALENT, UPDATE_TALENT, CALCULATE_PROGRESSION } from '../actions/types';\r\nimport { Talent } from '../models/Talent';\r\n\r\nexport type TalentReducerState = {\r\n    items: Talent[]\r\n    lastBeginsEditing: boolean\r\n}\r\n\r\nconst initialState: TalentReducerState = {\r\n    items: [],\r\n    lastBeginsEditing: false\r\n}\r\n\r\nexport default function(state = initialState, action: any) {\r\n    switch (action.type) {\r\n        case GET_TALENTS:\r\n            let talents: Talent[] = action.payload;\r\n            return {\r\n                ...state,\r\n                items: talents.sort((a, b) => a.id > b.id ? 1 : -1)\r\n            }\r\n        case NEW_TALENT:\r\n            let newTalent: Talent = action.payload;\r\n            return {\r\n                ...state,\r\n                items: [\r\n                    ...state.items,\r\n                    newTalent\r\n                ],\r\n                lastBeginsEditing: true\r\n            }\r\n        case DELETE_TALENT:\r\n            let id: number = action.payload;\r\n            let newItems = state.items.filter(tal => tal.id !== id);\r\n            return {\r\n                ...state,\r\n                items: newItems\r\n            }\r\n        case UPDATE_TALENT:\r\n            let payload: Talent = action.payload;\r\n\r\n            // Update item if its already in the list, else its likely being\r\n            // timed inside incubator\r\n            let i = state.items.findIndex(tal => tal.id === payload.id)\r\n            \r\n            if (i === -1)\r\n                return state\r\n\r\n            let items = state.items.filter(tal => tal.id !== payload.id);\r\n\r\n            return {\r\n                ...state,\r\n                items: [\r\n                    ...items,\r\n                    payload\r\n                ].sort((a, b) => a.id > b.id ? 1 : -1)\r\n            }\r\n        case EXCLUDE_TALENT:\r\n            let targetId = action.payload;\r\n            let exclusionItems = state.items.filter(tal => tal.id !== targetId);\r\n            return {\r\n                ...state,\r\n                items: exclusionItems\r\n            }\r\n        case INCLUDE_TALENT:\r\n            let includeItem: Talent = action.payload;\r\n            return {\r\n                ...state,\r\n                items: [\r\n                    ...state.items,\r\n                    includeItem\r\n                ].sort((a, b) => a.id > b.id ? 1 : -1),\r\n                lastBeginsEditing: false\r\n            }\r\n        case CALCULATE_PROGRESSION:\r\n            return {\r\n                ...state,\r\n                items: [\r\n                    ...action.payload.talents\r\n                ]\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { Talent } from '../models/Talent';\r\nimport { TalentSession } from '../models/TalentSession';\r\nimport { START_SESSION, STOP_SESSION, POLL_SESSION, GET_SESSIONS } from '../actions/types';\r\n\r\nexport type TimerReducerState = {\r\n    session: {\r\n        talent: Talent | null,\r\n        session: TalentSession | null\r\n    },\r\n    sessions: TalentSession[]\r\n}\r\n\r\nconst initialState = {\r\n    session: {\r\n        talent: null,\r\n        session: null\r\n    },\r\n    sessions: []\r\n}\r\n\r\nexport default function(state = initialState, action: any) {\r\n    switch (action.type) {\r\n        case START_SESSION:\r\n            return {\r\n                ...state,\r\n                session: action.payload\r\n            }\r\n        case STOP_SESSION:\r\n            return {\r\n                ...state,\r\n                session: {\r\n                    talent: null,\r\n                    session: null\r\n                }\r\n            }\r\n        case POLL_SESSION:\r\n            let session: TalentSession = action.payload.session;\r\n            return {\r\n                ...state,\r\n                sessions: [\r\n                    ...state.sessions.filter((s: TalentSession) => s.id !== session.id),\r\n                    session\r\n                ],\r\n                session: action.payload\r\n            }\r\n        case GET_SESSIONS:\r\n            return {\r\n                ...state,\r\n                sessions: action.payload\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers } from 'redux';\r\nimport talentReducer from './talentReducer';\r\nimport timerReducer from './timerReducer';\r\n\r\nexport default combineReducers({\r\n    talents: talentReducer,\r\n    timer: timerReducer\r\n});","import { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nimport rootReducer from './reducers';\r\nimport { TalentReducerState } from './reducers/talentReducer';\r\nimport { TimerReducerState } from './reducers/timerReducer';\r\n\r\nexport type RootState = {\r\n    talents: TalentReducerState\r\n    timer: TimerReducerState\r\n}\r\n\r\nconst initialState = {};\r\n\r\nconst middleware = [thunk];\r\n\r\nconst createUltraStore = () =>\r\n    createStore(\r\n        rootReducer,\r\n        initialState,\r\n        applyMiddleware(...middleware)\r\n    );\r\n\r\nexport default createUltraStore;","import IModel from './IModel';\r\n\r\n/**\r\n * Provides simple and fast in-memory storage for model items through a map.\r\n * \r\n * Usefully combined with specialised model implementations for quick model\r\n * implementation and local caching capabilities.\r\n */\r\nexport default class SimpleModel<T> implements IModel<T> {\r\n    protected counter: number = 0;\r\n    protected models: Map<number, T>;\r\n\r\n    private cloneFunc: (el: T) => T;\r\n    private getIdFunc: (el: T) => number;\r\n    private setIdFunc: (el: T, id: number) => void;\r\n\r\n    constructor(kvPairs: [number, T][],\r\n        cloneFunc: (el: T) => T,\r\n        getIdFunc: (el: T) => number,\r\n        setIdFunc: (el: T, id: number) => void) {\r\n        if (kvPairs === undefined)\r\n            throw new ReferenceError(\"Couldn't construct. KV Pairs argument was undefined.\");\r\n\r\n        if (cloneFunc === undefined)\r\n            throw new ReferenceError(\"Couldn't construct. Clone function argument was undefined.\");\r\n\r\n        if (getIdFunc === undefined)\r\n            throw new ReferenceError(\"Couldn't construct. Get ID function argument was undefined.\");\r\n\r\n        if (setIdFunc === undefined)\r\n            throw new ReferenceError(\"Couldn't construct. Set ID function argument was undefined.\");\r\n\r\n        this.cloneFunc = cloneFunc;\r\n        this.getIdFunc = getIdFunc;\r\n        this.setIdFunc = setIdFunc;\r\n\r\n        kvPairs = kvPairs.map(pair => [pair[0], this.cloneFunc(pair[1])]);\r\n        this.models = new Map<number, T>(kvPairs);\r\n\r\n        for (let id of Array.from(this.models.keys())) {\r\n            if (isNaN(id))\r\n                throw new EvalError(`Failed to initialize model object. Model ID: \"${id}\" evaluated to NaN during counter initialization.`);\r\n            \r\n            // Pre-correct the counter for the ids of new elements\r\n            const nId = id + 1;\r\n            this.counter = this.counter > nId ? this.counter : nId;\r\n        }\r\n    }\r\n\r\n    create(model: T): T {\r\n        if (model === null)\r\n            throw new TypeError(\"Can't create an element with a null model argument.\");\r\n\r\n        if (model === undefined)\r\n            throw new TypeError(\"Can't create an element with an undefined model argument.\");\r\n\r\n        if (this.models.has(this.counter))\r\n            throw new RangeError(\"Couldn't create model. ID from counter already exists in the model, which should never happen. Model may be corrupt.\");\r\n\r\n        let clone = this.cloneFunc(model);\r\n        this.setIdFunc(clone, this.counter);\r\n        this.models.set(this.counter, clone);\r\n        this.counter++;\r\n        this.save();\r\n        return this.cloneFunc(clone);\r\n    }\r\n\r\n    getAll(): T[] {\r\n        return Array.from(this.models.values());\r\n    }\r\n\r\n    get(id: number): T | undefined {\r\n        const el = this.models.get(id);\r\n\r\n        if (el === undefined)\r\n            return undefined;\r\n\r\n        // Return a copy to extend immutability\r\n        return this.cloneFunc(el);\r\n    }\r\n\r\n    update(element: T): T {\r\n        if (element === null)\r\n            throw new TypeError(\"Can't update a null element.\");\r\n\r\n        if (element === undefined)\r\n            throw new TypeError(\"Can't update an undefined element.\");\r\n\r\n        let clone = this.cloneFunc(element);\r\n        this.models.set(this.getIdFunc(element), clone);\r\n        this.save();\r\n        return this.cloneFunc(clone);\r\n    }\r\n\r\n    delete(element: T) {\r\n        if (element === null)\r\n            throw new TypeError(\"Can't delete a null element.\");\r\n\r\n        if (element === undefined)\r\n            throw new TypeError(\"Can't delete an undefined element.\");\r\n\r\n        this.models.delete(this.getIdFunc(element));\r\n        this.save();\r\n    }\r\n\r\n    deleteId(id: number) {\r\n        this.models.delete(id);\r\n        this.save();\r\n    }\r\n\r\n    protected save() {}\r\n}","import SimpleModel from './SimpleModel';\r\nimport { Talent, cloneTalent } from './Talent';\r\n\r\n/**\r\n * Saves talents across sessions through the LocalStorage API.\r\n */\r\nclass LocalTalentModel extends SimpleModel<Talent> {\r\n    constructor(initialTalents: Talent[] = []) {\r\n        let talentPairs: [number, Talent][];\r\n\r\n        if (initialTalents.length === 0) {\r\n            const rawTalents = localStorage.getItem(\"talents\");\r\n            talentPairs = JSON.parse(rawTalents ?? \"[]\");\r\n        } else {\r\n            talentPairs = initialTalents.map(tal => [tal.id, tal]);\r\n        }\r\n\r\n        super(\r\n            talentPairs,\r\n            cloneTalent,\r\n            tal => tal.id,\r\n            (tal, id) => tal.id = id\r\n        );\r\n    }\r\n\r\n    protected save() {\r\n        localStorage.setItem(\r\n            \"talents\",\r\n            JSON.stringify(Array.from(this.models))\r\n        );\r\n    }\r\n}\r\n\r\nexport default LocalTalentModel;","export type TalentSession = {\r\n    id: number,\r\n    userId: number,\r\n    talentId: number,\r\n    startTimestamp: Date,\r\n    endTimestamp: Date | null,\r\n    progressObtained: number,\r\n    ultrasHeld: number\r\n}\r\n\r\nexport const createSession = (id: number, talentId: number, userId: number = 0, startTimestamp: Date = new Date(), endTimestamp: Date | null = null, progressObtained: number = 0, ultrasHeld: number = 0): TalentSession => ({\r\n    id: id,\r\n    talentId: talentId,\r\n    userId: userId,\r\n    startTimestamp: startTimestamp,\r\n    endTimestamp: endTimestamp,\r\n    progressObtained: progressObtained,\r\n    ultrasHeld: ultrasHeld\r\n});\r\n\r\nexport const cloneSession = (session: TalentSession): TalentSession => ({\r\n    id: session.id,\r\n    talentId: session.talentId,\r\n    userId: session.userId,\r\n    startTimestamp: session.startTimestamp,\r\n    endTimestamp: session.endTimestamp,\r\n    progressObtained: session.progressObtained,\r\n    ultrasHeld: session.ultrasHeld\r\n});","import { TalentSession, createSession, cloneSession } from './TalentSession';\r\nimport { IExchangeModel } from './IExchangeModel';\r\nimport { Talent } from './Talent';\r\nimport SimpleModel from './SimpleModel';\r\n\r\nexport default class LocalTalentSessionModel extends SimpleModel<TalentSession> implements IExchangeModel<Talent, TalentSession> {\r\n    constructor(initialTalentSessions: TalentSession[] = []) {\r\n        let kvPairs: [number, TalentSession][];\r\n        if (initialTalentSessions.length > 0) {\r\n            kvPairs = initialTalentSessions.map(s => [s.id, s]);\r\n        } else {\r\n            kvPairs = JSON.parse(localStorage.getItem(\"sessions\") ?? \"[]\");\r\n        }\r\n        \r\n        // Convert string values into date objects\r\n        for (let i = 0; i < kvPairs.length; i++) {\r\n            const [ , session ] = kvPairs[i];\r\n            session.startTimestamp = new Date(session.startTimestamp);\r\n            if (session.endTimestamp) {\r\n                session.endTimestamp = new Date(session.endTimestamp);\r\n            }\r\n        }\r\n\r\n        super(kvPairs, cloneSession, (el) => el.id, (el, id) => el.id = id);\r\n    }\r\n\r\n    exchange(seed: Talent): TalentSession {\r\n        let modelSession = super.create(\r\n            createSession(this.counter, seed.id, seed.userId, new Date(), null, 0)\r\n        );\r\n        return modelSession;\r\n    }\r\n\r\n    protected save() {\r\n        localStorage.setItem(\r\n            \"sessions\",\r\n            JSON.stringify(Array.from(this.models))\r\n        );\r\n    }\r\n}","import { Talent, cloneTalent } from \"./Talent\";\r\nimport { TalentSession, cloneSession } from \"./TalentSession\";\r\nimport { ITalentIncubator } from './ITalentIncubator';\r\nimport ReactGA from 'react-ga';\r\n\r\nexport class TalentIncubator implements ITalentIncubator {\r\n    private initialTalent: Talent | null = null;\r\n    private talent: Talent | null = null;\r\n    private session: TalentSession | null = null;\r\n    private lastUpdateMs?: number;\r\n    \r\n    incubate(talent: Talent, session: TalentSession) {\r\n        this.initialTalent = cloneTalent(talent);\r\n        this.talent = cloneTalent(talent);\r\n        this.session = cloneSession(session);\r\n        this.lastUpdateMs = Date.now();\r\n    }\r\n\r\n    poll(): {talent: Talent, session: TalentSession} {\r\n        if (this.talent === null ||\r\n            this.session === null ||\r\n            this.initialTalent === null)\r\n            throw new EvalError(\"Cannot poll. No talents are being incubated.\");\r\n\r\n        if (this.talent.progressTarget <= 0)\r\n            throw new EvalError(\"Could not incubate talent. Progress target was 0, causing divide by zero. Set a progress target of N hours on the talent object.\");\r\n\r\n        if (this.lastUpdateMs === undefined)\r\n            throw new EvalError(\"Could not incubate talent. Illegal program state. Last Update MS was not initialised to a millis, which is impossible, and implies incubate() was never called.\");\r\n\r\n        let nowMs = Date.now();\r\n        let msDelta = nowMs - this.lastUpdateMs;\r\n        let sDelta = msDelta / 1000;\r\n        this.lastUpdateMs = nowMs;\r\n\r\n        let progress = sDelta;\r\n\r\n        this.session.endTimestamp = new Date();\r\n        this.session.progressObtained += progress;\r\n        if (!this.talent.streakObtained && this.session.progressObtained >= 1800) {\r\n            progress += this.talent.progressTarget / 7;\r\n\r\n            this.talent.streakCount++;\r\n            this.talent.streakObtained = true;\r\n            this.talent.expiring = false;\r\n            this.talent.burndown = false;\r\n\r\n            ReactGA.event({\r\n                category: 'User',\r\n                action: 'Streak Hit'\r\n            });\r\n        }\r\n\r\n        this.talent.progress += progress;\r\n        if (this.talent.progress >= this.talent.progressTarget) {\r\n            let nOverflow = Math.floor(this.talent.progress / this.talent.progressTarget);\r\n            this.talent.goldUltras += nOverflow;\r\n            this.talent.progress = this.talent.progress % this.talent.progressTarget;\r\n        }\r\n\r\n        this.talent.totalSeconds += sDelta;\r\n        this.session.ultrasHeld = this.talent.goldUltras;\r\n\r\n        return {\r\n            talent: cloneTalent(this.talent),\r\n            session: cloneSession(this.session)\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        this.initialTalent = null;\r\n        this.talent = null;\r\n        this.session = null;\r\n        this.lastUpdateMs = undefined;\r\n    }\r\n\r\n    isIncubating(): boolean {\r\n        return this.talent !== null;\r\n    }\r\n\r\n    getTalent() : Talent | null {\r\n        return this.talent;\r\n    }\r\n}","import { configureModel as configureTalentModel } from './actions/talentActions';\r\nimport { configureModel as configureSessionModel, configureIncubator } from './actions/timerActions';\r\nimport LocalTalentModel from './models/LocalTalentModel';\r\nimport LocalTalentSessionModel from './models/LocalTalentSessionModel';\r\nimport { TalentIncubator } from './models/TalentIncubator';\r\n\r\nconfigureTalentModel(new LocalTalentModel());\r\nconfigureSessionModel(new LocalTalentSessionModel());\r\nconfigureIncubator(new TalentIncubator());","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { Provider } from 'react-redux';\r\n\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport createUltraStore from './store';\r\nimport './modelSetup';\r\n\r\nReactDOM.render(\r\n    <Provider store={createUltraStore()}>\r\n        <App />\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\n// serviceWorker.unregister();\r\nserviceWorker.register({});"],"sourceRoot":""}